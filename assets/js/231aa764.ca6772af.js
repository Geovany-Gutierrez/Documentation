"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2050],{248:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var o=n(4848),a=n(8453);const s={sidebar_position:1,title:"Estudo TS - Login Form",sidebar_label:"Login Form"},t=void 0,i={id:"EstudoCodigos/loginForm",title:"Estudo TS - Login Form",description:"C\xf3digo",source:"@site/docs/EstudoCodigos/loginForm.md",sourceDirName:"EstudoCodigos",slug:"/EstudoCodigos/loginForm",permalink:"/Documentation/docs/EstudoCodigos/loginForm",draft:!1,unlisted:!1,editUrl:"https://github.com/Geovany-Gutierrez/Documentation/edit/main/my-website/docs/EstudoCodigos/loginForm.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Estudo TS - Login Form",sidebar_label:"Login Form"},sidebar:"tutorialSidebar",previous:{title:"Estudo Projeto",permalink:"/Documentation/docs/category/estudo-projeto"},next:{title:"Documentacao",permalink:"/Documentation/docs/category/documentacao"}},d={},l=[];function c(e){const r={code:"code",li:"li",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n,{children:[(0,o.jsx)("summary",{children:"C\xf3digo"}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import {\r\n  Title,\r\n  Paragraph,\r\n  InputField,\r\n  FormLabel,\r\n  SubmitButton,\r\n  RedSpan,\r\n} from "../styles/form.styles";\r\n\r\n// Componente\r\nimport React, { useState } from "react";\r\n\r\nfunction generateToken() {\r\n  // Gera um n\xfamero aleat\xf3rio de 16 d\xedgitos\r\n  return Math.random().toString(36).substring(2, 18);\r\n}\r\n\r\nconst Form: React.FC = () => {\r\n  const [username, setUsername] = useState("");\r\n  const [password, setPassword] = useState("");\r\n  const [formType, setFormType] = useState(0); // 0 \xe9 o login e 1 \xe9 o registro\r\n\r\n  const handleRegister = (e: { preventDefault: () => void }) => {\r\n    e.preventDefault();\r\n  \r\n    const usernameToCreate = (document.getElementById(\r\n      "createUser"\r\n    ) as HTMLInputElement)?.value;\r\n    const passwordToCreate = (document.getElementById(\r\n      "createPassword"\r\n    ) as HTMLInputElement)?.value;\r\n  \r\n    // Verifica se o usu\xe1rio j\xe1 existe\r\n    const existingUser = JSON.parse(localStorage.getItem(usernameToCreate) || \'null\');\r\n    if (existingUser) {\r\n      alert("Este usu\xe1rio j\xe1 existe. Por favor, escolha outro nome de usu\xe1rio.");\r\n    } else {\r\n      // Cria um novo usu\xe1rio\r\n      const token = generateToken();\r\n      const newUser = { username: usernameToCreate, password: passwordToCreate, token: token };\r\n      localStorage.setItem(usernameToCreate, JSON.stringify(newUser));\r\n      alert("Registro bem-sucedido! Por favor, fa\xe7a login.");\r\n    }\r\n  };\r\n  \r\n  const handleLogin = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n  \r\n    const usernameInput = (document.getElementById(\r\n      "username"\r\n    ) as HTMLInputElement)?.value;\r\n    const passwordInput = (document.getElementById(\r\n      "password"\r\n    ) as HTMLInputElement)?.value;\r\n  \r\n    // Verifica se o usu\xe1rio existe e se a senha coincide\r\n    const storedUser = JSON.parse(localStorage.getItem(usernameInput) || \'null\');\r\n    if (storedUser && storedUser.password === passwordInput) {\r\n      if (!storedUser.token) {\r\n        // Se o token estiver vazio, cria um novo token\r\n        const token = generateToken();\r\n        storedUser.token = token;\r\n        localStorage.setItem(usernameInput, JSON.stringify(storedUser));\r\n      }\r\n      alert("Login bem-sucedido!");\r\n    } else {\r\n      // Se o usu\xe1rio ou senha estiverem incorretos, exibe um alerta\r\n      alert("Usu\xe1rio ou senha incorretos!");\r\n    }\r\n  };\r\n\r\n  const handleToggleForm = () => {\r\n    setFormType(formType === 0 ? 1 : 0);\r\n  };\r\n  return (\r\n    <form\r\n      onSubmit={formType === 0 ? handleLogin : handleRegister}\r\n      action="/personagens"\r\n    >\r\n      <Title htmlFor="username">\r\n        {formType === 0 ? "Bem vindo(a) de volta!" : "Crie sua conta!"}\r\n      </Title>\r\n      <Paragraph>\r\n        {formType === 0 ? "Acesse sua conta" : "Crie uma nova conta"}\r\n      </Paragraph>\r\n      <InputField\r\n        id={formType === 0 ? "username" : "createUser"}\r\n        placeholder={formType === 0 ? "Usu\xe1rio" : "Crie seu Usu\xe1rio"}\r\n        value={username}\r\n        onChange={(e: { target: { value: React.SetStateAction<string> } }) =>\r\n          setUsername(e.target.value)\r\n        }\r\n      />\r\n      <InputField\r\n        id={formType === 0 ? "password" : "createPassword"}\r\n        placeholder={formType === 0 ? "Senha" : "Crie sua Senha"}\r\n        value={password}\r\n        onChange={(e: { target: { value: React.SetStateAction<string> } }) =>\r\n          setPassword(e.target.value)\r\n        }\r\n      />\r\n      {formType === 0 ? (\r\n        <div>\r\n          <input type="checkbox" id="salvarLogin" />\r\n          <FormLabel htmlFor="salvarLogin"> Salvar login</FormLabel>\r\n        </div>\r\n      ) : null}\r\n      <SubmitButton\r\n        type="submit"\r\n        value={formType === 0 ? "Entrar" : "Registrar"}\r\n      />\r\n      <Paragraph $textAlign="center">\r\n        {formType === 0 ? "Ainda n\xe3o tem o login?" : "J\xe1 tem uma conta?"}\r\n        <a href="#" onClick={handleToggleForm}>\r\n          <RedSpan>{formType === 0 ? "Cadastre-se" : "Fa\xe7a login"}</RedSpan>\r\n        </a>\r\n      </Paragraph>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\n'})})]}),"\n",(0,o.jsxs)(n,{children:[(0,o.jsx)("summary",{children:"Entendendo o c\xf3digo"}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import {\r\n  Title,\r\n  Paragraph,\r\n  InputField,\r\n  FormLabel,\r\n  SubmitButton,\r\n  RedSpan,\r\n} from "../styles/form.styles";\n'})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Aqui estamos importando componentes estilizados do arquivo ",(0,o.jsx)(r.code,{children:"form.styles"}),". Esses componentes estilizados s\xe3o provavelmente estilos reutiliz\xe1veis para os elementos do formul\xe1rio, como t\xedtulos, par\xe1grafos, campos de entrada, bot\xf5es, etc."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import React, { useState } from "react";\n'})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Importamos o React e a fun\xe7\xe3o ",(0,o.jsx)(r.code,{children:"useState"}),". O React \xe9 a biblioteca fundamental para construir interfaces de usu\xe1rio em React, e ",(0,o.jsx)(r.code,{children:"useState"})," \xe9 um gancho que permite adicionar estado a componentes de fun\xe7\xe3o."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:"function generateToken() {\r\n  // Gera um n\xfamero aleat\xf3rio de 16 d\xedgitos\r\n  return Math.random().toString(36).substring(2, 18);\r\n}\n"})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Aqui temos uma fun\xe7\xe3o chamada ",(0,o.jsx)(r.code,{children:"generateToken"}),", que gera um token aleat\xf3rio de 16 caracteres. Esse token \xe9 usado para identificar usu\xe1rios durante o processo de registro."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:"const Form: React.FC = () => {\n"})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Aqui declaramos um componente de fun\xe7\xe3o chamado ",(0,o.jsx)(r.code,{children:"Form"}),". Ele \xe9 definido como um componente de fun\xe7\xe3o do React (",(0,o.jsx)(r.code,{children:"React.FC"}),")."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'const [username, setUsername] = useState("");\r\nconst [password, setPassword] = useState("");\r\nconst [formType, setFormType] = useState(0);\n'})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Estamos usando a fun\xe7\xe3o ",(0,o.jsx)(r.code,{children:"useState"})," para definir tr\xeas estados locais dentro do componente ",(0,o.jsx)(r.code,{children:"Form"}),": ",(0,o.jsx)(r.code,{children:"username"}),", ",(0,o.jsx)(r.code,{children:"password"})," e ",(0,o.jsx)(r.code,{children:"formType"}),". ",(0,o.jsx)(r.code,{children:"useState"})," retorna um array com dois elementos: o estado atual e uma fun\xe7\xe3o para atualizar esse estado."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'const handleRegister = (e: { preventDefault: () => void }) => {\r\n  e.preventDefault();\r\n\r\n  const usernameToCreate = (document.getElementById(\r\n    "createUser"\r\n  ) as HTMLInputElement)?.value;\r\n  const passwordToCreate = (document.getElementById(\r\n    "createPassword"\r\n  ) as HTMLInputElement)?.value;\r\n\r\n  // Verifica se o usu\xe1rio j\xe1 existe\r\n  const existingUser = JSON.parse(localStorage.getItem(usernameToCreate) || \'null\');\r\n  if (existingUser) {\r\n    alert("Este usu\xe1rio j\xe1 existe. Por favor, escolha outro nome de usu\xe1rio.");\r\n  } else {\r\n    // Cria um novo usu\xe1rio\r\n    const token = generateToken();\r\n    const newUser = { username: usernameToCreate, password: passwordToCreate, token: token };\r\n    localStorage.setItem(usernameToCreate, JSON.stringify(newUser));\r\n    alert("Registro bem-sucedido! Por favor, fa\xe7a login.");\r\n  }\r\n};\n'})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"handleRegister"})," \xe9 uma fun\xe7\xe3o que lida com o registro de novos usu\xe1rios. Ele \xe9 chamado quando o formul\xe1rio de registro \xe9 enviado."]}),"\n",(0,o.jsx)(r.li,{children:"Primeiro, ele impede o comportamento padr\xe3o do formul\xe1rio de recarregar a p\xe1gina."}),"\n",(0,o.jsxs)(r.li,{children:["Em seguida, obt\xe9m os valores dos campos de entrada ",(0,o.jsx)(r.code,{children:"username"})," e ",(0,o.jsx)(r.code,{children:"password"})," do formul\xe1rio de registro."]}),"\n",(0,o.jsxs)(r.li,{children:["Verifica se j\xe1 existe um usu\xe1rio com o mesmo nome de usu\xe1rio no armazenamento local (",(0,o.jsx)(r.code,{children:"localStorage"}),")."]}),"\n",(0,o.jsx)(r.li,{children:"Se o usu\xe1rio j\xe1 existir, exibe um alerta informando que o usu\xe1rio j\xe1 existe."}),"\n",(0,o.jsxs)(r.li,{children:["Caso contr\xe1rio, cria um novo usu\xe1rio com um token gerado aleatoriamente e o armazena no ",(0,o.jsx)(r.code,{children:"localStorage"}),"."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'const handleLogin = (event: React.FormEvent) => {\r\n  event.preventDefault();\r\n\r\n  const usernameInput = (document.getElementById(\r\n    "username"\r\n  ) as HTMLInputElement)?.value;\r\n  const passwordInput = (document.getElementById(\r\n    "password"\r\n  ) as HTMLInputElement)?.value;\r\n\r\n  // Verifica se o usu\xe1rio existe e se a senha coincide\r\n  const storedUser = JSON.parse(localStorage.getItem(usernameInput) || \'null\');\r\n  if (storedUser && storedUser.password === passwordInput) {\r\n    if (!storedUser.token) {\r\n      // Se o token estiver vazio, cria um novo token\r\n      const token = generateToken();\r\n      storedUser.token = token;\r\n      localStorage.setItem(usernameInput, JSON.stringify(storedUser));\r\n    }\r\n    alert("Login bem-sucedido!");\r\n  } else {\r\n    // Se o usu\xe1rio ou senha estiverem incorretos, exibe um alerta\r\n    alert("Usu\xe1rio ou senha incorretos!");\r\n  }\r\n};\n'})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"handleLogin"})," \xe9 uma fun\xe7\xe3o que lida com o processo de login. \xc9 chamado quando o formul\xe1rio de login \xe9 enviado."]}),"\n",(0,o.jsxs)(r.li,{children:["Assim como ",(0,o.jsx)(r.code,{children:"handleRegister"}),", primeiro ele impede o comportamento padr\xe3o do formul\xe1rio."]}),"\n",(0,o.jsxs)(r.li,{children:["Em seguida, obt\xe9m os valores dos campos de entrada ",(0,o.jsx)(r.code,{children:"username"})," e ",(0,o.jsx)(r.code,{children:"password"})," do formul\xe1rio de login."]}),"\n",(0,o.jsxs)(r.li,{children:["Verifica se existe um usu\xe1rio com o nome de usu\xe1rio fornecido no armazenamento local (",(0,o.jsx)(r.code,{children:"localStorage"}),") e se a senha corresponde \xe0 senha armazenada."]}),"\n",(0,o.jsx)(r.li,{children:"Se o usu\xe1rio existir e a senha estiver correta, verifica se o usu\xe1rio j\xe1 possui um token. Se n\xe3o tiver, gera um novo token e o armazena."}),"\n",(0,o.jsx)(r.li,{children:"Exibe um alerta informando se o login foi bem-sucedido ou se houve algum erro."}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:"const handleToggleForm = () => {\r\n  setFormType(formType === 0 ? 1 : 0);\r\n};\n"})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"handleToggleForm"})," \xe9 uma fun\xe7\xe3o que alterna entre os modos de login e registro. Quando chamada, altera o estado ",(0,o.jsx)(r.code,{children:"formType"})," entre 0 e 1, alternando assim entre a exibi\xe7\xe3o do formul\xe1rio de login e o formul\xe1rio de registro."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'return (\r\n  <form\r\n    onSubmit={formType === 0 ? handleLogin : handleRegister}\r\n    action="/personagens"\r\n  >\r\n    {/* Componentes de t\xedtulo e par\xe1grafo */}\r\n    <Title htmlFor="username">\r\n      {formType === 0 ? "Bem vindo(a) de volta!" : "Crie sua conta!"}\r\n    </Title>\r\n    <Paragraph>\r\n      {formType === 0 ? "Acesse sua conta" : "Crie uma nova conta"}\r\n    </Paragraph>\r\n\r\n    {/* Campos de entrada para username e password */}\r\n    <InputField\r\n      id={formType === 0 ? "username" : "createUser"}\r\n      placeholder={formType === 0 ? "Usu\xe1rio" : "Crie seu Usu\xe1rio"}\r\n      value={username}\r\n      onChange={(e: { target: { value: React.SetStateAction<string> } }) =>\r\n        setUsername(e.target.value)\r\n      }\r\n    />\r\n    <InputField\r\n      id={formType === 0 ? "password" : "createPassword"}\r\n      placeholder={formType === 0 ? "Senha" : "Crie sua Senha"}\r\n      value={password}\r\n      onChange={(e: { target: { value: React.SetStateAction<string> } }) =>\r\n        setPassword(e.target.value)\r\n      }\r\n    />\r\n\r\n    {/* Checkbox para salvar login (apenas para login) */}\r\n    {formType === 0 ? (\r\n      <div>\r\n        <input type="checkbox ```javascript\r\n      id="salvarLogin" />\r\n        <FormLabel htmlFor="salvarLogin"> Salvar login</FormLabel>\r\n      </div>\r\n    ) : null}\r\n\r\n    {/* Bot\xe3o de envio do formul\xe1rio */}\r\n    <SubmitButton\r\n      type="submit"\r\n      value={formType === 0 ? "Entrar" : "Registrar"}\r\n    />\r\n\r\n    {/* Par\xe1grafo para alternar entre login e registro */}\r\n    <Paragraph $textAlign="center">\r\n      {formType === 0 ? "Ainda n\xe3o tem o login?" : "J\xe1 tem uma conta?"}\r\n      <a href="#" onClick={handleToggleForm}>\r\n        <RedSpan>{formType === 0 ? "Cadastre-se" : "Fa\xe7a login"}</RedSpan>\r\n      </a>\r\n    </Paragraph>\r\n  </form>\r\n);\n'})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Aqui \xe9 onde todo o formul\xe1rio \xe9 renderizado."}),"\n",(0,o.jsxs)(r.li,{children:["Dependendo do estado ",(0,o.jsx)(r.code,{children:"formType"}),", ele decide se deve chamar a fun\xe7\xe3o ",(0,o.jsx)(r.code,{children:"handleLogin"})," ou ",(0,o.jsx)(r.code,{children:"handleRegister"})," quando o formul\xe1rio \xe9 enviado."]}),"\n",(0,o.jsxs)(r.li,{children:["O conte\xfado do formul\xe1rio \xe9 din\xe2mico e muda com base em ",(0,o.jsx)(r.code,{children:"formType"}),"."]}),"\n",(0,o.jsxs)(r.li,{children:["Os valores dos campos de entrada (",(0,o.jsx)(r.code,{children:"username"})," e ",(0,o.jsx)(r.code,{children:"password"}),") s\xe3o controlados pelo estado do componente e atualizados usando a fun\xe7\xe3o ",(0,o.jsx)(r.code,{children:"setUsername"})," e ",(0,o.jsx)(r.code,{children:"setPassword"}),"."]}),"\n",(0,o.jsx)(r.li,{children:"Um checkbox para salvar o login \xe9 mostrado apenas no formul\xe1rio de login."}),"\n",(0,o.jsxs)(r.li,{children:["Um bot\xe3o de envio \xe9 renderizado com base no ",(0,o.jsx)(r.code,{children:"formType"}),"."]}),"\n",(0,o.jsxs)(r.li,{children:["Um link para alternar entre login e registro \xe9 renderizado, com base em ",(0,o.jsx)(r.code,{children:"formType"}),"."]}),"\n"]}),(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:"export default Form;\n"})}),(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Finalmente, o componente ",(0,o.jsx)(r.code,{children:"Form"})," \xe9 exportado como padr\xe3o para que possa ser importado e utilizado em outros arquivos."]}),"\n"]})]})]})}function u(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>i});var o=n(6540);const a={},s=o.createContext(a);function t(e){const r=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);